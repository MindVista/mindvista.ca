---
import { getCollection, type CollectionEntry } from "astro:content";
import PageLayout from "@layouts/PageLayout.astro";
import Prose from "@components/wrappers/Prose.astro";

interface PageProps {
  params: { legal: string },
  props: { page: CollectionEntry<"legal"> },
}

export async function getStaticPaths(): Promise<PageProps[]> {
  const pages = await getCollection("legal");
  return pages.map((page: CollectionEntry<"legal">) => ({
    params: { legal: page.slug },
    props: { page },
  })); 
}

const { page } = Astro.props as { page: CollectionEntry<"legal"> };
const { Content } = await page.render();
---

<PageLayout pageTitle={page.data.title} description={page.data.description}>
  <div class="container mx-auto px-4 py-8 md:py-12 lg:py-16 max-w-4xl">
    <div class="bg-white dark:bg-slate-900 rounded-xl shadow-lg shadow-sky-100 dark:shadow-slate-800/50 p-6 md:p-8 lg:p-12">
      <Prose>
        <Content />
      </Prose>
    </div>
  </div>
</PageLayout>